#!/bin/sh
# $FreeBSD: src/usr.sbin/ntp/scripts/mkver,v 1.4.2.1 2001/03/05 13:08:48 ru Exp $
PROG=${1-UNKNOWN}

ConfStr="$PROG"

case "" in
 '') ;;
 *)  ConfStr="$ConfStr RSAREF" ;;
esac

ConfStr="$ConfStr 4.0.99b `LC_ALL=C date`"

if [ ! -f .version ]; then
  echo 0 > .version
fi
RUN="`cat .version`"
RUN="`expr $RUN + 1`"
echo $RUN > .version

ConfStr="$ConfStr (${RUN})"

echo "Version <${ConfStr}>";

rm -f version.c
cat > version.c << -EoF-
/*
 * version file for $PROG
 */
#include <config.h>
const char * Version = "${ConfStr}";
-EoF-
