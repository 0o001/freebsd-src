# $FreeBSD: src/tools/regression/bin/sh/builtins/wait1.0,v 1.1.2.2.4.1 2012/03/03 06:15:13 kensmith Exp $

failures=
failure() {
	echo "Error at line $1" >&2
	failures=x$failures
}

exit 4 & p4=$!
exit 8 & p8=$!
wait $p4
[ $? = 4 ] || failure $LINENO
wait $p8
[ $? = 8 ] || failure $LINENO

exit 3 & p3=$!
exit 7 & p7=$!
wait $p7
[ $? = 7 ] || failure $LINENO
wait $p3
[ $? = 3 ] || failure $LINENO

test -z "$failures"
