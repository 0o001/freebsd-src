# $FreeBSD: src/tools/regression/bin/sh/builtins/cd1.0,v 1.2.2.1.2.1 2009/10/25 01:10:29 kensmith Exp $
set -e

PDIR=${TMPDIR:-/tmp}
cd ${PDIR}
TMPDIR=$(mktemp -d sh-test.XXXXXX)
chmod 0 ${TMPDIR}

cd -L ${TMPDIR} 2>/dev/null && exit 1
[ "${PWD}" = "${PDIR}" ]
[ "$(pwd)" = "${PDIR}" ]
cd -P ${TMPDIR} 2>/dev/null && exit 1
[ "${PWD}" = "${PDIR}" ]
[ "$(pwd)" = "${PDIR}" ]

chmod 755 ${TMPDIR}
rmdir ${TMPDIR}
